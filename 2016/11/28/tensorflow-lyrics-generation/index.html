<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="Tensorflow lyrics generation"/>




  <meta name="keywords" content="tensorflow," />




  <link rel="alternate" href="/atom.xml" title="Lei's Blog">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.1.0" />



<link rel="canonical" href="http://leix.me/2016/11/28/tensorflow-lyrics-generation/"/>


<meta name="description" content="用TensorFlow生成周杰伦歌词最近深度学习在机器视觉CV、自然语言处理NLP领域表现出强大的潜力，各种深度学习/机器学习框架也层出不穷。tensorflow是google于去年（2015.11）开源的深度学习框架，截止目前（2016-11-28）github上已经有38000+的star数，称之为最近最受欢迎的深度学习框架一点也不过分。
本着学习tensorflow和RNN的目的，前些天发现">
<meta property="og:type" content="article">
<meta property="og:title" content="Tensorflow lyrics generation">
<meta property="og:url" content="http://leix.me/2016/11/28/tensorflow-lyrics-generation/index.html">
<meta property="og:site_name" content="Lei's Blog">
<meta property="og:description" content="用TensorFlow生成周杰伦歌词最近深度学习在机器视觉CV、自然语言处理NLP领域表现出强大的潜力，各种深度学习/机器学习框架也层出不穷。tensorflow是google于去年（2015.11）开源的深度学习框架，截止目前（2016-11-28）github上已经有38000+的star数，称之为最近最受欢迎的深度学习框架一点也不过分。
本着学习tensorflow和RNN的目的，前些天发现">
<meta property="og:image" content="http://leix.me/images/rnn.png">
<meta property="og:updated_time" content="2017-01-11T05:46:40.231Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tensorflow lyrics generation">
<meta name="twitter:description" content="用TensorFlow生成周杰伦歌词最近深度学习在机器视觉CV、自然语言处理NLP领域表现出强大的潜力，各种深度学习/机器学习框架也层出不穷。tensorflow是google于去年（2015.11）开源的深度学习框架，截止目前（2016-11-28）github上已经有38000+的star数，称之为最近最受欢迎的深度学习框架一点也不过分。
本着学习tensorflow和RNN的目的，前些天发现">
<meta name="twitter:image" content="http://leix.me/images/rnn.png">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.1.0" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />




  



    <title> Tensorflow lyrics generation · Lei's Blog </title>
  </head>

  <body>
    <div class="container">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Lei's Blog</a>
</div>

<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            Home
          </a>
        </li>
      
        
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            Archives
          </a>
        </li>
      
        
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            About
          </a>
        </li>
      
      
    </ul>
  
</nav>

<div class="mobile-navbar">
  <div class="mobile-header">
    <div class="mobile-header-logo">
      <a href="/." class="logo">Lei's Blog</a>
    </div>

    <div class="mobile-header-icon">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
  <nav class="mobile-menu">
    
      
      <a class="mobile-menu-item" href="/">
        Home
      </a>
    
      
      <a class="mobile-menu-item" href="/archives/">
        Archives
      </a>
    
      
      <a class="mobile-menu-item" href="/about">
        About
      </a>
    
  </nav>
</div>
      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Tensorflow lyrics generation
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Nov 28, 2016
        </span>
      </div>
    </header>

    
      <div class="post-toc" id="post-toc">
        <h2 class="post-toc-title">Contents</h2>
        <div class="post-toc-content">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#用tensorflow生成周杰伦歌词"><span class="toc-text">用TensorFlow生成周杰伦歌词 </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基本原理"><span class="toc-text">基本原理 </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码"><span class="toc-text">代码 </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结果展示"><span class="toc-text">结果展示 </span></a></li></ol>
        </div>
      </div>
    

    <div class="post-content">
      
        <h2 id="&#x7528;tensorflow&#x751F;&#x6210;&#x5468;&#x6770;&#x4F26;&#x6B4C;&#x8BCD;"><a href="#&#x7528;TensorFlow&#x751F;&#x6210;&#x5468;&#x6770;&#x4F26;&#x6B4C;&#x8BCD;" class="headerlink" title="&#x7528;TensorFlow&#x751F;&#x6210;&#x5468;&#x6770;&#x4F26;&#x6B4C;&#x8BCD;"></a>&#x7528;TensorFlow&#x751F;&#x6210;&#x5468;&#x6770;&#x4F26;&#x6B4C;&#x8BCD; <a href="#&#x7528;tensorflow&#x751F;&#x6210;&#x5468;&#x6770;&#x4F26;&#x6B4C;&#x8BCD;" class="header-anchor"></a></h2><p>&#x6700;&#x8FD1;&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x5728;&#x673A;&#x5668;&#x89C6;&#x89C9;CV&#x3001;&#x81EA;&#x7136;&#x8BED;&#x8A00;&#x5904;&#x7406;NLP&#x9886;&#x57DF;&#x8868;&#x73B0;&#x51FA;&#x5F3A;&#x5927;&#x7684;&#x6F5C;&#x529B;&#xFF0C;&#x5404;&#x79CD;&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;/&#x673A;&#x5668;&#x5B66;&#x4E60;&#x6846;&#x67B6;&#x4E5F;&#x5C42;&#x51FA;&#x4E0D;&#x7A77;&#x3002;tensorflow&#x662F;google&#x4E8E;&#x53BB;&#x5E74;&#xFF08;2015.11&#xFF09;&#x5F00;&#x6E90;&#x7684;&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x6846;&#x67B6;&#xFF0C;&#x622A;&#x6B62;&#x76EE;&#x524D;&#xFF08;2016-11-28&#xFF09;github&#x4E0A;&#x5DF2;&#x7ECF;&#x6709;38000+&#x7684;star&#x6570;&#xFF0C;&#x79F0;&#x4E4B;&#x4E3A;&#x6700;&#x8FD1;&#x6700;&#x53D7;&#x6B22;&#x8FCE;&#x7684;&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x6846;&#x67B6;&#x4E00;&#x70B9;&#x4E5F;&#x4E0D;&#x8FC7;&#x5206;&#x3002;</p>
<p>&#x672C;&#x7740;&#x5B66;&#x4E60;tensorflow&#x548C;RNN&#x7684;&#x76EE;&#x7684;&#xFF0C;&#x524D;&#x4E9B;&#x5929;&#x53D1;&#x73B0;&#x4E86;<a href="https://github.com/karpathy/char-rnn" target="_blank" rel="external">char-rnn</a>&#x8FD9;&#x4E2A;&#x6709;&#x8DA3;&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x5177;&#x4F53;&#x5C31;&#x662F;&#x57FA;&#x4E8E;&#x5B57;&#x7B26;&#x9884;&#x6D4B;&#x4E0B;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#xFF0C;&#x6BD4;&#x65E5;&#x8BF4;&#x5DF2;&#x77E5;<code>hello</code>&#x7684;&#x524D;&#x56DB;&#x4E2A;&#x5B57;&#x6BCD;<code>hell</code>&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x636E;&#x6B64;&#x9884;&#x6D4B;&#x4E0B;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x5F88;&#x53EF;&#x80FD;&#x662F;<code>o</code>,&#x56E0;&#x4E3A;&#x662F;&#x5B57;&#x7B26;char&#x7EA7;&#x522B;&#x7684;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x5355;&#x8BCD;&#x6216;&#x53E5;&#x5B50;&#x5C42;&#x6B21;&#x4E0A;&#x7684;&#x7279;&#x5F81;&#x63D0;&#x53D6;&#xFF0C;&#x76F8;&#x5BF9;&#x800C;&#x8A00;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x6613;&#x5B66;&#x3002;</p>
<a id="more"></a>
<p>&#x56E0;&#x4E3A;&#x539F;&#x4F5C;&#x8005;&#x7684;&#x4EE3;&#x7801;&#x662F;&#x57FA;&#x4E8E;torch&#x5199;&#x7684;&#xFF0C;&#x4E3A;&#x4E86;&#x719F;&#x6089;tensorflow&#xFF0C;&#x6211;&#x5C31;&#x4ED4;&#x7EC6;&#x5730;&#x7814;&#x7A76;&#x4E86;&#x4E00;&#x4E0B;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#xFF0C;&#x7136;&#x540E;&#x6539;&#x5199;&#x6210;&#x57FA;&#x4E8E;tf&#x7684;&#x4EE3;&#x7801;&#xFF0C;github&#x4E0A;&#x4E5F;&#x6709;&#x57FA;&#x4E8E;tensorflow&#x7684;<a href="https://github.com/sherjilozair/char-rnn-tensorflow" target="_blank" rel="external">char-rnn-tensorflow</a>&#xFF0C;&#x6055;&#x6211;&#x76F4;&#x8A00;&#xFF0C;&#x6709;&#x4EE5;&#x4E0B;&#x4E09;&#x70B9;&#x6BD4;&#x8F83;&#x8188;&#x5E94;&#xFF1A;</p>
<ol>
<li>&#x4EE3;&#x7801;&#x5199;&#x7684;&#x4E0D;&#x591F;&#x76F4;&#x89C2;&#x7B80;&#x6D01;</li>
<li>&#x53E6;&#x5916;&#x56E0;&#x4E3A;&#x6700;&#x65B0;tensorflow&#x7684;&#x90E8;&#x5206;api&#x6709;&#x6240;&#x53D8;&#x5316;</li>
<li>&#x4E2D;&#x82F1;&#x6587;&#x4E4B;&#x95F4;&#x6709;&#x4E00;&#x4E9B;&#x5DEE;&#x5F02;&#xFF0C;&#x770B;&#x80FD;&#x5426;&#x6210;&#x529F;&#x79FB;&#x690D;&#x5230;&#x5904;&#x7406;&#x4E2D;&#x6587;&#x4E0A;</li>
</ol>
<p>&#x4E8E;&#x662F;&#x6253;&#x7B97;&#x57FA;&#x4E8E;&#x4EE5;&#x4E0A;&#x4E24;&#x4E2A;&#x9879;&#x76EE;&#xFF0C;&#x81EA;&#x5DF1;&#x91CD;&#x5199;&#xFF01;</p>
<h2 id="&#x57FA;&#x672C;&#x539F;&#x7406;"><a href="#&#x57FA;&#x672C;&#x539F;&#x7406;" class="headerlink" title="&#x57FA;&#x672C;&#x539F;&#x7406;"></a>&#x57FA;&#x672C;&#x539F;&#x7406; <a href="#&#x57FA;&#x672C;&#x539F;&#x7406;" class="header-anchor"></a></h2><p>&#x62FF;&#x4E2D;&#x6587;&#x4E3E;&#x4F8B;&#x6765;&#x8BF4;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B57;&#x4E0E;&#x6BCF;&#x4E2A;&#x5B57;&#x5E76;&#x4E0D;&#x662F;&#x7EDF;&#x8BA1;&#x4E0A;&#x72EC;&#x7ACB;&#x7684;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4;<code>&#x5982;&#x679C;&#x4E0D;&#x7231;&#x5C31;&#x4E0D;&#x8981;&#x518D;&#x4F24;&#x5BB3;</code> &#x957F;&#x5EA6;&#x4E3A;10&#x7684;&#x5E8F;&#x5217;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x77E5;&#x9053;<code>&#x5982;</code>&#xFF0C;&#x4E0B;&#x4E00;&#x4E2A;&#x5B57;&#x6709;&#x53EF;&#x80FD;&#x662F;<code>&#x679C;</code>&#xFF0C;&#x5982;&#x679C;&#x77E5;&#x9053;&#x524D;&#x4E24;&#x4E2A;&#x5B57;<code>&#x5982;&#x679C;</code>&#xFF0C;&#x7B2C;&#x4E09;&#x4E2A;&#x5B57;&#x5C31;&#x662F;<code>&#x4E0D;</code>&#x7684;&#x53EF;&#x80FD;&#x6027;&#x5927;&#x4E9B;&#xFF0C;&#x4F9D;&#x6B21;&#x7C7B;&#x63A8;&#xFF0C;&#x5982;&#x679C;&#x77E5;&#x9053;&#x524D;9&#x4E2A;&#x5B57;<code>&#x5982;&#x679C;&#x4E0D;&#x7231;&#x5C31;&#x4E0D;&#x8981;&#x518D;&#x4F24;</code>&#xFF0C;&#x90A3;&#x4E48;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5C31;&#x6709;&#x53EF;&#x80FD;&#x662F;<code>&#x5BB3;</code>&#x5B57;&#x3002;&#x7528;&#x56FE;&#x76F4;&#x89C2;&#x7684;&#x8868;&#x793A;&#x5982;&#x4E0B;&#x3002;</p>
<p><img src="/images/rnn.png" alt="rnn"><br>&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;<code>seq2seq</code>&#x7684;&#x6A21;&#x578B;&#xFF0C;&#x8BAD;&#x7EC3;&#x6570;&#x636E;&#x7528;&#x7684;&#x662F;&#x5468;&#x6770;&#x4F26;01&#x5E74;&#x5230;11&#x5E74;&#x6240;&#x6709;&#x6B4C;&#x7684;&#x6B4C;&#x8BCD;&#xFF0C;&#x8BAD;&#x7EC3;&#x6570;&#x636E;&#x548C;&#x4EE3;&#x7801;&#x6211;&#x90FD;&#x653E;&#x5230;github&#x4E0A;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;&#x8FD9;&#x91CC;<a href="https://github.com/leido/char-rnn-cn" target="_blank" rel="external">&#x4E0B;&#x8F7D;</a></p>
<h2 id="&#x4EE3;&#x7801;"><a href="#&#x4EE3;&#x7801;" class="headerlink" title="&#x4EE3;&#x7801;"></a>&#x4EE3;&#x7801; <a href="#&#x4EE3;&#x7801;" class="header-anchor"></a></h2><p>&#x5168;&#x90E8;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> time</div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line"><span class="keyword">from</span> tensorflow.contrib.tensorboard.plugins <span class="keyword">import</span> projector</div><div class="line"><span class="keyword">from</span> tensorflow.python.ops <span class="keyword">import</span> rnn_cell, seq2seq</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HParam</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    batch_size = <span class="number">32</span></div><div class="line">    n_epoch = <span class="number">100</span></div><div class="line">    learning_rate = <span class="number">0.01</span></div><div class="line">    decay_steps = <span class="number">1000</span></div><div class="line">    decay_rate = <span class="number">0.9</span></div><div class="line">    grad_clip = <span class="number">5</span></div><div class="line"></div><div class="line">    state_size = <span class="number">100</span></div><div class="line">    num_layers = <span class="number">3</span></div><div class="line">    seq_length = <span class="number">20</span></div><div class="line">    log_dir = <span class="string">&apos;./logs&apos;</span></div><div class="line">    metadata = <span class="string">&apos;metadata.tsv&apos;</span></div><div class="line">    gen_num = <span class="number">500</span> <span class="comment"># how many chars to generate</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataGenerator</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, datafiles, args)</span>:</span></div><div class="line">        self.seq_length = args.seq_length</div><div class="line">        self.batch_size = args.batch_size</div><div class="line">        <span class="keyword">with</span> open(datafiles, encoding=<span class="string">&apos;utf-8&apos;</span>) <span class="keyword">as</span> f:</div><div class="line">            self.data = f.read()</div><div class="line"></div><div class="line">        self.total_len = len(self.data)  <span class="comment"># total data length</span></div><div class="line">        self.words = list(set(self.data))</div><div class="line">        self.words.sort()</div><div class="line">        <span class="comment"># vocabulary</span></div><div class="line">        self.vocab_size = len(self.words)  <span class="comment"># vocabulary size</span></div><div class="line">        print(<span class="string">&apos;Vocabulary Size: &apos;</span>, self.vocab_size)</div><div class="line">        self.char2id_dict = {w: i <span class="keyword">for</span> i, w <span class="keyword">in</span> enumerate(self.words)}</div><div class="line">        self.id2char_dict = {i: w <span class="keyword">for</span> i, w <span class="keyword">in</span> enumerate(self.words)}</div><div class="line"></div><div class="line">        <span class="comment"># pointer position to generate current batch</span></div><div class="line">        self._pointer = <span class="number">0</span></div><div class="line"></div><div class="line">        <span class="comment"># save metadata file</span></div><div class="line">        self.save_metadata(args.metadata)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">char2id</span><span class="params">(self, c)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.char2id_dict[c]</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">id2char</span><span class="params">(self, id)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.id2char_dict[id]</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">save_metadata</span><span class="params">(self, file)</span>:</span></div><div class="line">        <span class="keyword">with</span> open(file, <span class="string">&apos;w&apos;</span>) <span class="keyword">as</span> f:</div><div class="line">            f.write(<span class="string">&apos;id\tchar\n&apos;</span>)</div><div class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(self.vocab_size):</div><div class="line">                c = self.id2char(i)</div><div class="line">                f.write(<span class="string">&apos;{}\t{}\n&apos;</span>.format(i, c))</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next_batch</span><span class="params">(self)</span>:</span></div><div class="line">        x_batches = []</div><div class="line">        y_batches = []</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(self.batch_size):</div><div class="line">            <span class="keyword">if</span> self._pointer + self.seq_length + <span class="number">1</span> &gt;= self.total_len:</div><div class="line">                self._pointer = <span class="number">0</span></div><div class="line">            bx = self.data[self._pointer: self._pointer + self.seq_length]</div><div class="line">            by = self.data[self._pointer +</div><div class="line">                           <span class="number">1</span>: self._pointer + self.seq_length + <span class="number">1</span>]</div><div class="line">            self._pointer += self.seq_length  <span class="comment"># update pointer position</span></div><div class="line"></div><div class="line">            <span class="comment"># convert to ids</span></div><div class="line">            bx = [self.char2id(c) <span class="keyword">for</span> c <span class="keyword">in</span> bx]</div><div class="line">            by = [self.char2id(c) <span class="keyword">for</span> c <span class="keyword">in</span> by]</div><div class="line">            x_batches.append(bx)</div><div class="line">            y_batches.append(by)</div><div class="line"></div><div class="line">        <span class="keyword">return</span> x_batches, y_batches</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span><span class="params">()</span>:</span></div><div class="line">    <span class="string">&quot;&quot;&quot;</span></div><div class="line">    The core recurrent neural network model.</div><div class="line">    &quot;&quot;&quot;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, args, data, infer=False)</span>:</span></div><div class="line">        <span class="keyword">if</span> infer:</div><div class="line">            args.batch_size = <span class="number">1</span></div><div class="line">            args.seq_length = <span class="number">1</span></div><div class="line">        <span class="keyword">with</span> tf.name_scope(<span class="string">&apos;inputs&apos;</span>):</div><div class="line">            self.input_data = tf.placeholder(</div><div class="line">                tf.int32, [args.batch_size, args.seq_length])</div><div class="line">            self.target_data = tf.placeholder(</div><div class="line">                tf.int32, [args.batch_size, args.seq_length])</div><div class="line"></div><div class="line">        <span class="keyword">with</span> tf.name_scope(<span class="string">&apos;model&apos;</span>):</div><div class="line">            self.cell = rnn_cell.BasicLSTMCell(args.state_size)</div><div class="line">            self.cell = rnn_cell.MultiRNNCell([self.cell] * args.num_layers)</div><div class="line">            self.initial_state = self.cell.zero_state(</div><div class="line">                args.batch_size, tf.float32)</div><div class="line">            <span class="keyword">with</span> tf.variable_scope(<span class="string">&apos;rnnlm&apos;</span>):</div><div class="line">                w = tf.get_variable(</div><div class="line">                    <span class="string">&apos;softmax_w&apos;</span>, [args.state_size, data.vocab_size])</div><div class="line">                b = tf.get_variable(<span class="string">&apos;softmax_b&apos;</span>, [data.vocab_size])</div><div class="line">                <span class="keyword">with</span> tf.device(<span class="string">&quot;/cpu:0&quot;</span>):</div><div class="line">                    embedding = tf.get_variable(</div><div class="line">                        <span class="string">&apos;embedding&apos;</span>, [data.vocab_size, args.state_size])</div><div class="line">                    inputs = tf.nn.embedding_lookup(embedding, self.input_data)</div><div class="line">            outputs, last_state = tf.nn.dynamic_rnn(</div><div class="line">                self.cell, inputs, initial_state=self.initial_state)</div><div class="line"></div><div class="line">        <span class="keyword">with</span> tf.name_scope(<span class="string">&apos;loss&apos;</span>):</div><div class="line">            output = tf.reshape(outputs, [<span class="number">-1</span>, args.state_size])</div><div class="line"></div><div class="line">            self.logits = tf.matmul(output, w) + b</div><div class="line">            self.probs = tf.nn.softmax(self.logits)</div><div class="line">            self.last_state = last_state</div><div class="line"></div><div class="line">            targets = tf.reshape(self.target_data, [<span class="number">-1</span>])</div><div class="line">            loss = seq2seq.sequence_loss_by_example([self.logits],</div><div class="line">                                                    [targets],</div><div class="line">                                                    [tf.ones_like(targets, dtype=tf.float32)])</div><div class="line">            self.cost = tf.reduce_sum(loss) / args.batch_size</div><div class="line">            tf.scalar_summary(<span class="string">&apos;loss&apos;</span>, self.cost)</div><div class="line"></div><div class="line">        <span class="keyword">with</span> tf.name_scope(<span class="string">&apos;optimize&apos;</span>):</div><div class="line">            self.lr = tf.placeholder(tf.float32, [])</div><div class="line">            tf.scalar_summary(<span class="string">&apos;learning_rate&apos;</span>, self.lr)</div><div class="line"></div><div class="line">            optimizer = tf.train.AdamOptimizer(self.lr)</div><div class="line">            tvars = tf.trainable_variables()</div><div class="line">            grads = tf.gradients(self.cost, tvars)</div><div class="line">            <span class="keyword">for</span> g <span class="keyword">in</span> grads:</div><div class="line">                tf.histogram_summary(g.name, g)</div><div class="line">            grads, _ = tf.clip_by_global_norm(grads, args.grad_clip)</div><div class="line"></div><div class="line">            self.train_op = optimizer.apply_gradients(zip(grads, tvars))</div><div class="line">            self.merged_op = tf.merge_all_summaries()</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(data, model, args)</span>:</span></div><div class="line">    <span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</div><div class="line">        sess.run(tf.global_variables_initializer())</div><div class="line">        saver = tf.train.Saver()</div><div class="line">        writer = tf.train.SummaryWriter(args.log_dir, sess.graph)</div><div class="line"></div><div class="line">        <span class="comment"># Add embedding tensorboard visualization. Need tensorflow version</span></div><div class="line">        <span class="comment"># &gt;= 0.12.0RC0</span></div><div class="line">        config = projector.ProjectorConfig()</div><div class="line">        embed = config.embeddings.add()</div><div class="line">        embed.tensor_name = <span class="string">&apos;rnnlm/embedding:0&apos;</span></div><div class="line">        embed.metadata_path = args.metadata</div><div class="line">        projector.visualize_embeddings(writer, config)</div><div class="line"></div><div class="line">        max_iter = args.n_epoch * \</div><div class="line">            (data.total_len // args.seq_length) // args.batch_size</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(max_iter):</div><div class="line">            learning_rate = args.learning_rate * \</div><div class="line">                (args.decay_rate ** (i // args.decay_steps))</div><div class="line">            x_batch, y_batch = data.next_batch()</div><div class="line">            feed_dict = {model.input_data: x_batch,</div><div class="line">                         model.target_data: y_batch, model.lr: learning_rate}</div><div class="line">            train_loss, summary, _, _ = sess.run([model.cost, model.merged_op, model.last_state, model.train_op],</div><div class="line">                                                 feed_dict)</div><div class="line"></div><div class="line">            <span class="keyword">if</span> i % <span class="number">10</span> == <span class="number">0</span>:</div><div class="line">                writer.add_summary(summary, global_step=i)</div><div class="line">                print(<span class="string">&apos;Step:{}/{}, training_loss:{:4f}&apos;</span>.format(i,</div><div class="line">                                                               max_iter, train_loss))</div><div class="line">            <span class="keyword">if</span> i % <span class="number">2000</span> == <span class="number">0</span> <span class="keyword">or</span> (i + <span class="number">1</span>) == max_iter:</div><div class="line">                saver.save(sess, os.path.join(</div><div class="line">                    args.log_dir, <span class="string">&apos;lyrics_model.ckpt&apos;</span>), global_step=i)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sample</span><span class="params">(data, model, args)</span>:</span></div><div class="line">    saver = tf.train.Saver()</div><div class="line">    <span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</div><div class="line">        ckpt = tf.train.latest_checkpoint(args.log_dir)</div><div class="line">        print(ckpt)</div><div class="line">        saver.restore(sess, ckpt)</div><div class="line"></div><div class="line">        <span class="comment"># initial phrase to warm RNN</span></div><div class="line">        prime = <span class="string">u&apos;&#x4F60;&#x8981;&#x79BB;&#x5F00;&#x6211;&#x77E5;&#x9053;&#x5F88;&#x7B80;&#x5355;&apos;</span></div><div class="line">        state = sess.run(model.cell.zero_state(<span class="number">1</span>, tf.float32))</div><div class="line"></div><div class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> prime[:<span class="number">-1</span>]:</div><div class="line">            x = np.zeros((<span class="number">1</span>, <span class="number">1</span>))</div><div class="line">            x[<span class="number">0</span>, <span class="number">0</span>] = data.char2id(word)</div><div class="line">            feed = {model.input_data: x, model.initial_state: state}</div><div class="line">            state = sess.run(model.last_state, feed)</div><div class="line"></div><div class="line">        word = prime[<span class="number">-1</span>]</div><div class="line">        lyrics = prime</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(args.gen_num):</div><div class="line">            x = np.zeros([<span class="number">1</span>, <span class="number">1</span>])</div><div class="line">            x[<span class="number">0</span>, <span class="number">0</span>] = data.char2id(word)</div><div class="line">            feed_dict = {model.input_data: x, model.initial_state: state}</div><div class="line">            probs, state = sess.run([model.probs, model.last_state], feed_dict)</div><div class="line">            p = probs[<span class="number">0</span>]</div><div class="line">            word = data.id2char(np.argmax(p))</div><div class="line">            print(word, end=<span class="string">&apos;&apos;</span>)</div><div class="line">            sys.stdout.flush()</div><div class="line">            time.sleep(<span class="number">0.05</span>)</div><div class="line">            lyrics += word</div><div class="line">        <span class="keyword">return</span> lyrics</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(infer)</span>:</span></div><div class="line"></div><div class="line">    args = HParam()</div><div class="line">    data = DataGenerator(<span class="string">&apos;JayLyrics.txt&apos;</span>, args)</div><div class="line">    model = Model(args, data, infer=infer)</div><div class="line"></div><div class="line">    run_fn = sample <span class="keyword">if</span> infer <span class="keyword">else</span> train</div><div class="line"></div><div class="line">    run_fn(data, model, args)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">&apos;__main__&apos;</span>:</div><div class="line">    msg = <span class="string">&quot;&quot;&quot;</span></div><div class="line">    Usage:</div><div class="line">    Training: </div><div class="line">        python3 gen_lyrics.py 0</div><div class="line">    Sampling:</div><div class="line">        python3 gen_lyrics.py 1</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    <span class="keyword">if</span> len(sys.argv) == <span class="number">2</span>:</div><div class="line">        infer = int(sys.argv[<span class="number">-1</span>])</div><div class="line">        print(<span class="string">&apos;--Sampling--&apos;</span> <span class="keyword">if</span> infer <span class="keyword">else</span> <span class="string">&apos;--Training--&apos;</span>)</div><div class="line">        main(infer)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        print(msg)</div><div class="line">        sys.exit(<span class="number">1</span>)</div></pre></td></tr></table></figure></p>
<p><code>python3 gen_lyrics 0</code>&#x8BAD;&#x7EC3;&#x5DEE;&#x4E0D;&#x591A;10&#x51E0;&#x5206;&#x949F;&#xFF0C;&#x7136;&#x540E;&#x8FD0;&#x884C;<code>python3 gen_lyrics.py 1</code>&#x751F;&#x6210;&#x7684;&#x6B4C;&#x8BCD;&#x5982;&#x4E0B;&#xFF1A;</p>
<h2 id="&#x7ED3;&#x679C;&#x5C55;&#x793A;"><a href="#&#x7ED3;&#x679C;&#x5C55;&#x793A;" class="headerlink" title="&#x7ED3;&#x679C;&#x5C55;&#x793A;"></a>&#x7ED3;&#x679C;&#x5C55;&#x793A; <a href="#&#x7ED3;&#x679C;&#x5C55;&#x793A;" class="header-anchor"></a></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">&#x5982;&#x679C;&#x79BB;&#x5F00;&#x8BF7;&#x4E0D;&#x8981;&#x4F24;&#x5BB3;</div><div class="line">&#x4F60;&#x7684;&#x7B11; &#x6211;&#x7684;&#x7B11;&#x5BB9; &#x6211;&#x4EEC;&#x7684;&#x7231;&#x60C5;</div><div class="line">&#x4E0D;&#x8981;&#x54ED;&#x4E0D;&#x5230;&#x6211;</div><div class="line">&#x4F60;&#x4E0D;&#x8BE5;&#x7684;&#x7231;&#x60C5;</div><div class="line">&#x6211;&#x7684;&#x7B11;&#x5BB9; &#x8BA9;&#x6211;&#x4EEC; &#x6211;&#x7684;&#x7231;&#x6EA2;&#x51FA;&#x5C31;&#x8C61;&#x96E8;&#x8E22;</div><div class="line">&#x6211;&#x7684;&#x5634;&#x89D2;</div><div class="line">&#x800C;&#x6211;&#x4EEC; &#x534A;&#x517D;&#x4EBA; &#x7684;&#x91CC;</div><div class="line">&#x6211;&#x7528;&#x7B2C;&#x7559; &#x4F60;&#x8BF4;&#x7684;&#x7231;&#x6211;</div><div class="line">&#x502D;&#xFF5E;&#x7684; &#x7684;&#x5E73;&#x5019;</div><div class="line">&#x8D8A;&#x7740;&#x4F60;&#x7684;&#x70ED;&#x60C5;</div><div class="line">&#x6211;&#x4E0D;&#x8981;&#x518D;&#x5FAE;&#x7B11;</div><div class="line">&#x6211;&#x7684;&#x7B11;&#x5BB9; &#x8BA9;&#x6211;&#x4EEC; &#x6211;&#x7684;&#x89E3; &#x6211;&#x7528;&#x7231;&#x4EC0;&#x4E48; &#x5A18;&#x5B50;&#x4F9D;&#x65E7;&#x7B49;&#x5F85; &#x4F60;&#x597D;&#x4F60; &#x542C;&#x4E0D;&#x8BE5;</div><div class="line">&#x5F69;&#x8679;&#x7684; &#x7231;&#x914B;&#x7684;&#x8272;&#x91CC; &#x4E0D;&#x50CF;&#x8FDE;&#x4E8B;&#x7684;&#x6A21;  &#x6211;&#x8DDF;&#x4E00;&#x79CD;&#x5473;&#x9053;</div><div class="line">&#x51B7;&#x4E0D;&#x7559;</div><div class="line">&#x8BED;&#x6C89;&#x6211;&#x4EEC;&#x5BFB;&#x7684;&#x753B;&#x9762;</div><div class="line">&#x5168;&#x7F8E;&#x98D8; &#x4F60;&#x7684;&#x7B11;&#x5BB9; &#x62FC;&#x547D;&#x4E0D;&#x662F;&#x6211;&#x8981; &#x6211;&#x7684;&#x4E16;&#x754C;</div><div class="line">&#x6211;&#x7528;&#x7684;&#x610F;&#x8272;</div><div class="line">&#x7F3A;&#x5E2D;&#x4F60; &#x6211;&#x7684;&#x89E3;&#x91CA;&#x8BF7;&#x4F60;&#x52A1;&#x4E8B;</div><div class="line">&#x4F60;&#x7684;&#x7B11; &#x6211;&#x77E5;&#x9053;&#x4F60;</div><div class="line">&#x6211;&#x4E0D;&#x8981;</div><div class="line">&#x6211;&#x4E0D;&#x4F1A;&#x7ECF;&#x7684;&#x7231;&#x6211;</div><div class="line">&#x6211;&#x4E0D;&#x80FD;</div><div class="line">&#x6211;&#x7684;&#x58F0;&#x97F3;</div><div class="line">&#x6211;&#x4E0D;&#x80FD;&#x6709;&#x53D7;</div><div class="line">&#x53C8;&#x591A;&#x6162;&#x518D;&#x6211;</div><div class="line">&#x6211;&#x4E0D;&#x80FD;&#x6709;&#x8822;</div><div class="line">&#x6211;&#x6CA1;&#x8981;&#x7ED9;&#x6211;</div><div class="line">&#x4F60;&#x7684;&#x58F0;&#x97F3;</div><div class="line">&#x4F60;&#x7684;&#x7231;&#x60C5; &#x6211;&#x4E0D;&#x8981;</div><div class="line">&#x6211;&#x7684;&#x58F0;&#x97F3; &#x6211;&#x4E0D;&#x4E0D;&#x60F3;&#x8981;&#x6211;</div><div class="line">&#x4F60;&#x4E0D;&#x61C2;</div><div class="line">&#x8111;&#x888B;&#x74DC;&#x6709;&#x4E00;&#x70B9;&#x79C0;&#x5BB9;&#x7684;&#x56DB;&#x5468;&#x53EB;&#x662F;&#x4E00;&#x74E2;&#x7231;</div><div class="line">&#x7BEE;&#x5730;&#x5371;&#x540D;&#x662F;&#x592A;&#x9971;&#x52FE;&#x3000;</div><div class="line">&#x4F60;&#x8BF4;&#x6700;&#x5584;&#x6708; &#x8C46;&#x8150;(&#x8C46;&#x8150;)</div><div class="line">&#x4E8C;&#x836F;&#x5F00;&#x59CB;&#x6765; &#x56ED;&#x5E55;&#x6BDB;&#x9A74; Hia&#x952E; &#x8FD8;&#x4E0D;&#x591A;</div><div class="line">&#x8BF4;&#x4F60;&#x7684;&#x6CEA; &#x6211;&#x559C;&#x6B22;&#x7684;&#x6D6A;&#x88C5;</div><div class="line">&#x9F99;&#x4E0D;&#x5F00; &#x626F;&#x53BB;&#x4E86; &#x7231;&#x4E0D;&#x9700;&#x5B58;</div><div class="line">&#x4E0D;&#x8981;&#x95EE;&#x4E0D;&#x592A;&#x4F60;&#x7684;&#x58F0;&#x97F3;</div><div class="line">&#x6211;&#x7528;&#x7B2C;&#x4E00;&#x5929; &#x6211;&#x7528;&#x773C;&#x6CEA;</div></pre></td></tr></table></figure>
<p>&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x6211;&#x8981;&#x5199;&#x6B4C;&#x8BCD;&#x53BB;&#x4E86;&#xFF0C;&#x4E89;&#x53D6;&#x5F53;&#x4E0B;&#x4E00;&#x4E2A;&#x65B9;&#x6587;&#x5C71;!(escape)</p>

      
    </div>

    
      <footer class="post-footer">
        <div class="post-tags">
          
            <a href="/tags/tensorflow/">tensorflow</a>
          
        </div>

        
  <nav class="post-nav">
    
      <a class="prev" href="/2017/01/09/tensorflow-practical-guides/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">tensorflow practical guides</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2016/09/28/Oncoming CV conferences/">
        <span class="next-text nav-default">DL conferences timeline</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    
  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>

        </div>  
      </main>

      <footer id="footer" class="footer">
  <div class="social-links">
    
      
        
          <a href="mailto:dileu12@outlook.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/leido" class="iconfont icon-github" title="github"></a>
        
      
    
      
        
          <a href="http://weibo.com/neon1" class="iconfont icon-weibo" title="weibo"></a>
        
      
    
      
    
    
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2017

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">leido</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    

  <script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://leix.me/2016/11/28/tensorflow-lyrics-generation/';
        this.page.identifier = '2016/11/28/tensorflow-lyrics-generation/';
        this.page.title = 'Tensorflow lyrics generation';
    };
    (function() {
    var d = document, s = d.createElement('script');

    s.src = '//leido.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();  
  </script>


    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

    <script type="text/javascript" src="/js/src/even.js?v=2.1.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.1.0"></script>

  </body>
</html>